<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker App</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <!-- <link rel="stylesheet" href="static/mystyle.css"> -->
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

</head>

<body>
    <div>
        <div class="ui grid">
            <div class="four wide column">

            </div>

            <div class='four wide column'>
                <div style="margin-top: 50px;" class="ui container">

                    <h1 class="ui center aligned header">{{g.user.username}}'s Tracker</h1>
                    <a class="ui blue button" href="/registration">Register</a> {% if g.user == False %}
                    <a class="ui green button" href="/login">Login</a> {% else %}
                    <a class="ui red button" href="/logout">Logout</a> {% endif %}

                    <form class="ui form" action="/add" method="post">
                        <div class="field">
                            <label>Name</label>
                            <input type="text" name="name" placeholder="Enter the name of the product..."><br>
                        </div>

                        <div class="field">
                            <label>Quantity</label>
                            <input type="text" name="quantity" placeholder="Enter the quantity of the product..."><br>
                        </div>

                        <div class="field">
                            <label>Price</label>
                            <input type="text" name="price" placeholder="Enter the price of the product..."><br>
                        </div>

                        <button class="ui blue button" type="submit">Add</button>
                    </form>

                    <hr>

                    <div class="ui segment">
                        <h4>Money spend: {{ item_list | sum(attribute='price') }}€ </h4>
                    </div>

                    <hr> {% for item in item_list %}

                    <div class="ui segment">
                        {% if item.editable == True %}
                        <form class="ui form" action="/edit_name/{{ item.id }}" method="post">
                            <div class="field">
                                <label>Name</label>
                                <input type="text" name="name" placeholder="Edit the name..."><br>
                                <button class="ui blue button" type="submit">Save</button>
                            </div>
                        </form>
                        {% else %}
                        <div class="ui relaxed grid">
                            <div class='thirteen wide column'><a class="ui big header">{{ item_list.index(item) + 1 }} | {{ item.name }}</a></div>
                            <div class='column'><a class="ui icon button" style="font-size:10px;" href="/edit/{{ item.id }}"><i class="edit icon"></i></a></div>
                        </div>
                        {% endif %} {% if item.complete == False %}
                        <span class="ui green label">Available</span> {% else %}
                        <span class="ui gray label">Not available</span> {% endif %}
                        <br>
                        <i style="font-size:15px;">Price: {{ item.price }}€</b><br>
                        <i style = "font-size:15px;">Quantity: {{ item.quantity }}</b><br><br>

                        <a class="ui blue button" href="/update/{{ item.id }}">I ate it</a>
                        <a class="ui red button" href="/delete/{{ item.id }}">Delete</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</body>

</html>